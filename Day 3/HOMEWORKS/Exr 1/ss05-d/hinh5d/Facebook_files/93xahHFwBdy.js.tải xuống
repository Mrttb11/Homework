;/*FB_PKG_DELIM*/

__d("MWChatEmojiPickerWithSearch.react",["fbt","ix","CometColumn.react","CometColumnItem.react","CometEmojiPickerSearchResults.react","CometPlaceholder.react","CometProgressIndicator.react","CometRoundedTextInput.react","MWChatEmojiCategorySelector.bs","MWPBumpEntityKey","MWV2ComposerEmojiPickerHook","MWXIcon.react","TetraCircleButton.react","fbicon","react","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useMemo,m=b.useState,n={emojiInner:{height:"xo4zgqt",$$css:!0},emojiPicker:{paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",$$css:!0},emojiPickerContainer:{paddingTop:"xz9dl7a",width:"xj6ak53",$$css:!0},emojiPickerContainerSmall:{paddingTop:"xexx8yu",width:"xlro9se",$$css:!0},emojiSearch:{marginBottom:"x12nagc",paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",$$css:!0},loader:{height:"x5yr21d",$$css:!0}};function o(a){var b=a.searchQuery,e=a.setSearchQuery;a=h._("__JHASH__9_B0HYy73CK__JHASH__");var f=l(function(){return b.length!==0?j.jsx(c("TetraCircleButton.react"),{color:"tertiary",icon:d("fbicon")._(i("478232"),16),label:h._("__JHASH__04yVFCps0C___JHASH__"),onPress:function(){return e("")},size:24}):null},[b.length,e]),g=k(function(a){return e((a=a.target.value)!=null?a:"")},[e]);return j.jsx("div",{className:"x12nagc xurb0ha x1sxyh0",children:j.jsx(c("CometRoundedTextInput.react"),{addOnEnd:f,autoFocus_PLEASE_USE_FOCUS_REGION_INSTEAD:!0,icon:j.jsx(c("MWXIcon.react"),{color:"tertiary",icon:d("fbicon")._(i("491282"),16),size:16}),label:a,onChange:g,placeholder:a,spellCheck:!1,value:b})})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.gridColumns;b=b===void 0?8:b;var e=a.onSelect,f=a.selectedEmojis;a=a.topSection;a=a===void 0?null:a;var g=m(""),h=g[0];g=g[1];var i=c("MWV2ComposerEmojiPickerHook")(h);return j.jsxs("div",{className:c("stylex")(b===8?n.emojiPickerContainer:n.emojiPickerContainerSmall),children:[j.jsx(o,{searchQuery:h,setSearchQuery:g}),j.jsx("div",{className:"xo4zgqt",role:"grid",children:j.jsx(c("CometPlaceholder.react"),{fallback:j.jsx(c("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",xstyle:n.loader,children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("CometProgressIndicator.react"),{})})}),children:j.jsx(c("CometEmojiPickerSearchResults.react"),{categorySelector:d("MWChatEmojiCategorySelector.bs").make,gridColumns:b,height:265,onSelect:function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions",h.trim()===""?"select_reaction":"select_reaction.search");return e(a)},query:i,searchQuery:h,selectedEmojis:f,topSection:a,xstyle:n.emojiPicker})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("UnicodeUtils.bs",["UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("UnicodeUtils").getCodePoints(a)}g.getCodePoints=a}),98);
__d("MWChatEmojiPicker.react",["fbt","CometEmojiGrid.react","CometEmojiPicker.react","CometFocusTable.react","CometLazyDialogTrigger.react","CometPopover.react","CometPressable.react","I64","Int64Hooks","JSResourceForInteraction","MWChatEmojiCategorySelector.bs","MWChatEmojiPickerWithSearch.react","MWChatMessageId","MWPBumpEntityKey","MWXText.react","UnicodeUtils.bs","gkx","qex","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useMemo,l=c("requireDeferred")("MWChatCustomReactionsLog.bs").__setRef("MWChatEmojiPicker.react"),m={customizeButton:{marginEnd:"x1ffeobu",marginTop:"x1k70j0n",zIndex:"x1vjfegm",$$css:!0},customizeButtonContainer:{marginBottom:"xccbga4",$$css:!0},customizeButtonContainerSearch:{display:"x78zum5",end:"xds687c",justifyContent:"x13a6bvl",marginTop:"x1kgmq87",position:"x10l6tqk",start:"x17qophe",$$css:!0},customizeButtonSearch:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},emojiPicker:{paddingStart:"x1e558r4",$$css:!0},emojiPickerContainer:{paddingTop:"x889kno",width:"xlro9se",$$css:!0},topSection:{alignItems:"xuk3077",display:"x78zum5",flexDirection:"xdt5ytf",marginStart:"xrzrlj5",width:"xh8yej3",$$css:!0}},n=c("gkx")("467"),o=(e=c("qex")._("650"))!=null?e:!1;function p(a){var b=a.messageID,e=a.onSelect,f=a.reactions,g=a.selectedEmojis,p=a.threadKey,q=k(function(){return f.map(function(a){return{codepoints:d("UnicodeUtils.bs").getCodePoints(a.emoji),id:d("I64").to_string(a.emojiIdx)}})},[f]),r=d("Int64Hooks").useCallbackInt64(function(){l.onReady(function(a){return a.logEnterCustomizeFlow(b,p)})},[p,b]),s=j(function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction.quick");return e(a,0,0)},[e]);a=j(function(a){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction");return e(a,0,0)},[e]);var t=d("Int64Hooks").useMemoInt64(function(){return i.jsxs("div",{className:c("stylex")(o?!1:m.topSection),children:[n?i.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:{messageID:b,onClose:function(){},reactions:f,threadKey:p},dialogResource:c("JSResourceForInteraction")("MWChatCustomizeReactionsDialog").__setRef("MWChatEmojiPicker.react"),children:function(a){return i.jsx(d("CometFocusTable.react").CometFocusRow,{role:"row",children:i.jsx(d("CometFocusTable.react").CometFocusCell,{children:i.jsx("div",{className:c("stylex")(o?m.customizeButtonContainerSearch:m.customizeButtonContainer),children:i.jsx(c("CometPressable.react"),{onPress:function(b){a();return r()},testid:void 0,xstyle:function(){return[o?m.customizeButtonSearch:m.customizeButton]},children:i.jsx(c("MWXText.react"),{type:"bodyLink4",children:h._("__JHASH__BBwala8AXtL__JHASH__")})})})})})}}):null,i.jsx(c("CometEmojiGrid.react"),{columns:6,emojiCollection:q,emojiSize:o?30:28,emojiSpacing:o?2:4,label:h._("__JHASH__HbY9qJ7RY7n__JHASH__"),onClick:s,selectedEmojis:g},"your-reactions-grid")]})},[b,f,p,q,s,g,r]),u;o?u=i.jsx(c("MWChatEmojiPickerWithSearch.react"),{gridColumns:6,onSelect:function(a){return e(a,0,0)},selectedEmojis:g,topSection:t}):u=i.jsx(c("CometEmojiPicker.react"),{categorySelector:d("MWChatEmojiCategorySelector.bs").make,emojiSize:28,emojiSpacing:4,gridColumns:6,height:305,onSelect:a,selectedEmojis:g,topSection:t,xstyle:m.emojiPicker});return i.jsx(c("CometPopover.react"),{testid:void 0,withArrow:!0,children:i.jsx("div",{className:"x889kno xlro9se",children:u})})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.messageID,c=a.onSelect,e=a.reactions;a=a.selectedEmojis;var f=d("MWChatMessageId").getMessageId(b);b=d("MWChatMessageId").getThreadId(b);if(f!=null&&b!=null)return i.jsx(p,{messageID:f,onSelect:c,reactions:e,selectedEmojis:a,threadKey:b});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatReactionsMenu.react",["fbt","ix","CometPressable.react","EmojiRenderer","FocusRegion.react","I64","KeyCommandHandler.react","LSEmojiSetsType","LSIntEnum","MWChatEmojiPicker.react","MWChatMessageBothOrientationFocusGroup.bs","MWChatMessageId","MWChatReactionEmoji.bs","MWChatReactionsUtils.bs","MWMessageCellFocusTable.bs","MWPBumpEntityKey","ReQL","ReQLSuspense","TetraCircleButton.react","cr:4708","fbicon","focusScopeQueries","gkx","justknobx","react","recoverableViolation","stylex","useIsMultiReactionEnabled","useMWInboxPassiveContext","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");e=d("react");var k=e.useCallback,l=e.useMemo,m={emojiButtonForMultiReact:{marginEnd:"xfs2ol5",$$css:!0},item:{display:"x1rg5ohu",paddingTop:"x1nn3v0j",paddingEnd:"xg83lxy",paddingBottom:"x1120s5i",paddingStart:"x1h0ha7o",$$css:!0},menu:{backgroundColor:"x2bj2ny",borderTop:"x6umtig",borderEnd:"x1b1mbwd",borderBottom:"xaqea5y",borderStart:"xav7gou",borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6",boxShadow:"x104qc98",display:"x78zum5",paddingStart:"x1ye3gou",paddingEnd:"xn6708d",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},selected:{backgroundColor:"x1vtvx1t",borderTopStartRadius:"x1lq0und",borderTopEndRadius:"x904243",borderBottomEndRadius:"xunswzr",borderBottomStartRadius:"x1hba98",$$css:!0}},n=c("gkx")("467")||c("gkx")("4428"),o=(e=c("justknobx")._("745"))!=null?e:!1,p=c("gkx")("4428");function q(a,b){var e=c("useReStore")(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableDescending(e.table("emoji_sets")).filter(function(a){return d("I64").equal(a.type_,d("LSIntEnum").ofNumber(c("LSEmojiSetsType").USER_GENERATED))})},[e],f.id+":101"),h=l(function(){return g.sort(function(a,b){return d("I64").compare(a.sortKey,b.sortKey)}).reduce(function(a,b){var c=b.emoji;if(c!=null)return a.concat([{categoryIdx:b.categoryIdx,emoji:c,emojiIdx:b.emojiIdx,sortKey:b.sortKey,type_:b.type_}]);else return a},[])},[g]),i=h.length===d("MWChatReactionsUtils.bs").cUSTOM_REACTIONS_NUM;if(c("gkx")("8026")&&b===!0)return d("MWChatReactionsUtils.bs").defaultCustomizableReactions;if(a)if(i)return h;else return d("MWChatReactionsUtils.bs").defaultCustomizableReactions;else return d("MWChatReactionsUtils.bs").defaultStaticReactions}function r(a){var e=a.emoji,f=a.onSelect,g=a.selected;a=c("useMWInboxPassiveContext")();var h=a.setIsPassive;a=l(function(){return d("EmojiRenderer").parse(e).map(function(a){return a.emoji})},[e]);if(a.length!==1){c("recoverableViolation")("Unable to parse reaction emoji "+e,"messenger_comet");return null}a=a[0];a=j.jsx(d("MWMessageCellFocusTable.bs").FocusTable[2],{children:j.jsx(c("CometPressable.react"),{onPress:function(){c("gkx")("6531")&&h(!1);return f()},overlayDisabled:!0,role:"menuitem",xstyle:function(){return[m.item,g?m.selected:!1]},children:b("cr:4708")==null?j.jsx(d("MWChatReactionEmoji.bs").make,{emoji:a,size:32,testid:void 0}):j.jsx(b("cr:4708"),{emoji:a,hasTooltip:!0,size:32,testid:void 0})})});return j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroupItem,{children:a})}r.displayName=r.name+" [from "+f.id+"]";var s=[];function a(a){var b=a.closeActionsMenu,e=a.disableCustomReactions,f=a.isBroadcastThread,g=a.isSecure,l=a.messageID,t=a.onClose,u=a.onSelect,v=a.selectedReactions,w=a.setShowEmojiPicker,x=a.showEmojiPicker;a=d("MWChatMessageId").getThreadId(l);var y=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a);a=g!=null?g:!1;g=e!=null?e:!1;e=h._("__JHASH__plktFYNJzZQ__JHASH__");a=a?o&&n:n&&!g;g=q(a,f);f=k(function(a){var c=a.key;c==="Escape"?b():(!x&&(c==="ArrowUp"||c==="ArrowDown")||c==="ArrowLeft"||c==="ArrowRight"||c==="PageUp"||c==="PageDown"||c==="Home"||c==="End")&&a.stopPropagation()},[b,x]);var z=j.jsx(c("TetraCircleButton.react"),{icon:d("fbicon")._(i("483767"),12),label:h._("__JHASH__rcFhvEPmBgd__JHASH__"),onPress:function(){return w(function(a){return!a})},size:36,testid:void 0,type:"normal"}),A=k(function(a){a=a.reduce(function(a,b){b=String.fromCodePoint(b);var c=a[a.length-1];(c==null||!c.includes(b))&&a.push(b);return a},[]);u(a.join(""));t()},[u,t]);l=x?j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("MWChatEmojiPicker.react"),{messageID:l,onSelect:A,reactions:p?s:g,selectedEmojis:v})}):j.jsx("div",{"aria-label":e,"aria-orientation":"horizontal",className:"x2bj2ny x6umtig x1b1mbwd xaqea5y xav7gou x1z11no5 xjy5m1g x1mnwbp6 x4pb5v6 x104qc98 x78zum5 x1ye3gou xn6708d x1y1aw1k xwib8y2",role:"menu",children:g.map(function(a){var b=a.emoji;return j.jsx("div",{className:c("stylex")(y?m.emojiButtonForMultiReact:null),children:j.jsx(r,{emoji:b,onSelect:function(){u(b),d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.reactions","select_reaction.quick"),t()},selected:v!=null&&v.includes(b)})},b)}).concat([a?j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroupItem,{children:z},"plus-button"):null])});return j.jsx(d("MWChatMessageBothOrientationFocusGroup.bs").FocusGroup,{allowModifiers:!0,orientation:"both",preventScrollOnFocus:!1,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("KeyCommandHandler.react"),{onKeyDown:f,children:l})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);